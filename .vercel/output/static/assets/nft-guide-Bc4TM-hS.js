import{j as e}from"./main-BXy83AsK.js";let a="\n\nNon-Fungible Tokens in Cadence 1.0 [#non-fungible-tokens-in-cadence-10]\n\n:::important\nOn September 4th, 2024, the Flow Mainnet upgraded to Cadence 1.0. In addition to many changes to the Cadence programming language, the Cadence token standards were also streamlined and improved. All applications' scripts and transactions need to be updated. If you do not update your code, your applications will not function properly.\n:::\nThis document describes the changes to the Cadence Non-Fungible Token (NFT) standard and gives a step-by-step guide for how to upgrade your NFT contract from Cadence 0.42 to Cadence 1.0.\n\nWe'll be using the [`ExampleNFT` contract] as an example. Many projects have used `ExampleNFT` as a starting point for their projects, so it is widely applicable to most NFT developers on Flow. The upgrades required for `ExampleNFT` will cover 90%+ of what you'll need to do to update your contract. Each project most likely has additional logic or features that aren't included in `ExampleNFT`, but hopefully, after reading this guide, you'll understand Cadence 1.0 well enough that you can easily make any other changes that are necessary.\n\nAdditionally, most of the changes described here also apply to anyone who is updating a Fungible Token contract or interacting with one, so keep that in mind while reading if that applies to you.\n\nAs always, there are plenty of people on the Flow team and in the community who are happy to help answer any questions you may have, so please reach out in Discord if you need any help.\n\nImportant information [#important-information]\n\nPlease read the [NFT-V2 FLIP] that describes the changes to the `NonFungibleToken` standard first.\n\nThe updated code for the V2 Non-Fungible Token standard is located in the [`master` branch of the flow-nft repo]. Please look at the [PR that made the changes] to understand how the standard and examples have changed. Note the changes to the `NonFungibleToken`, `MetadataViews`, `ViewResolver`, and `NFTForwarding` contracts.\n\nAdditionally, here are the import addresses for all of the important contracts related to non-fungible tokens. The second column is the import address if you are testing with a basic version of the emulator. The third column contains the import addresses if you are using the Cadence testing framework:\n\n| Contract           | Emulator import address | Testing framework    |\n| ------------------ | ----------------------- | -------------------- |\n| `NonFungibleToken` | `0xf8d6e0586b0a20c7`    | `0x0000000000000001` |\n| `FungibleToken`    | `0xee82856bf20e2aa6`    | `0x0000000000000002` |\n| `ViewResolver`     | `0xf8d6e0586b0a20c7`    | `0x0000000000000001` |\n| `Burner`           | `0xf8d6e0586b0a20c7`    | `0x0000000000000001` |\n| `MetadataViews`    | `0xf8d6e0586b0a20c7`    | `0x0000000000000001` |\n\nSee the other guides in this section of the docs for the import addresses of other important contracts in the emulator.\n\nAs for contracts that are important for NFT developers but aren't *core contracts*, here is information about where to find the Cadence 1.0 versions of each:\n\n* **NFT Catalog** — The NFT Catalog has been deprecated for Cadence 1.0. Now that the token standards require implementing metadata views, NFT Catalog is not needed in its current form. The Flow team now maintains [TokenList], which is similar to NFT Catalog but is decentralized. Projects can register there without needing to be approved.\n* **NFT Storefront** — See the [`master` branch in the NFT Storefront Repo] for the updated versions of the `NFTStorefront` and `NFTStorefrontV2` contracts.\n* **USDC** — USDC was migrated to standard bridged USDC on Flow. See the [repo] for the latest version of the USDC contract.\n* **Account Linking and Hybrid Custody** — See the [`main` branch in the hybrid custody repo] for updated hybrid custody contracts.\n\n[This Discord announcement] also contains versions of a lot of important contracts.\n\nUse the [Flow Contract Browser] to find the 1.0 code of other contracts.\n\nA note for newcomers [#a-note-for-newcomers]\n\nThis guide is primarily for developers who have existing contracts deployed to Flow mainnet that they need to update for Cadence 1.0. If you don't have any contracts deployed yet, it is recommended that you start an NFT contract from scratch by either copying the `ExampleNFT` contract from the `master` branch of the `flow-nft` repo.\n\nAdditionally, the Flow community is working on  the [`BasicNFT` contract] in the `universal-collection` branch of the flow-nft GitHub repo. This is a simplified version of standard NFT contracts, but has not been completed yet.\n\nBasicNFT and UniversalCollection [#basicnft-and-universalcollection]\n\nAs part of the improvements to the NFT standard, there is now a new NFT contract example in the `flow-nft` GitHub repo:\n\n* [`BasicNFT` contract].\n\n`BasicNFT` defines a Cadence NFT in as few lines of code as possible, 137 at the moment! This is possible because the contract basically only defines the NFT resource, the essential metadata views, and a minter resource. It doesn't have to define a collection! Most collection resources are 99% boilerplate code, so it really doesn't make sense for most projects to have to define their own collection.\n\nInstead, `BasicNFT` uses [`UniversalCollection`], a contract that defines a collection resource that has all of the standard functionality that a collection needs and nothing else. From now on, any project that doesn't want to do anything unique with their collection can just import `UniversalCollection` and call it from their `createEmptyCollection` function:\n\n```cadence\naccess(all) fun createEmptyCollection(nftType: Type): @{NonFungibleToken.Collection} {\n    return <- UniversalCollection.createEmptyCollection(identifier: \"flowBasicNFTCollection\", type: Type<@BasicNFT.NFT>())\n}\n```\n\nAll they have to provide is a type and an identifier for the collection. `UniversalCollection.Collection` will enforce that only NFTs of the given type can be accepted by the collection:\n\n```cadence\naccess(all) fun deposit(token: @{NonFungibleToken.NFT}) {\n    if self.supportedType != token.getType() {\n        panic(\"Cannot deposit an NFT of the given type\")\n    }\n```\n\nIt also constructs standard paths based on the identifier provided.\n\n`UniversalCollection` will be deployed to all of the networks soon after the Cadence 1.0 upgrade, so developers will be able to import from it after that point.\n\nWe'll be putting out more information and guides for `BasicNFT` and `UniversalCollection` in the near future, but keep it in mind if you are thinking about deploying any new NFT contracts in the future!\n\nMigration guide [#migration-guide]\n\nThis guide will cover changes that are required because of upgrades to the Cadence programming language as well as the token standard. The improvements are described here as they apply to specific changes that projects need to make in order to be ready for the upgrade, but it is good to read all sources to fully understand the changes.\n\nPlease read the motivation section of the [NFT-V2 FLIP] to learn about why most of the changes to the standard were needed or desired.\n\nFirst, we will cover the changes that come from the new token standards and then we will cover the changes that come from Cadence.\n\nToken Standard Changes [#token-standard-changes]\n\n**`NonFungibleToken.NFT`**\n\n`NonFungibleToken.NFT` used to be a nested type specification, but now it is an interface!\n\nIn your code, any instance that refers to `@NonFungibleToken.NFT` or `&NonFungibleToken.NFT` must be updated to `@{NonFungibleToken.NFT}` or `&{NonFungibleToken.NFT}` respectively.\n\n**`NonFungibleToken.Collection`**\n\nSimilar to `NFT`, `NonFungibleToken.Collection` is now an interface.\n\nSince `Collection` is an interface, you will need to update every instance in your code that refers to `@NonFungibleToken.Collection` or `&NonFungibleToken.Collection` to `@{NonFungibleToken.Collection}` or `&{NonFungibleToken.Collection}` respectively to show that it is now an interface specification instead of a concrete type specification.\n\nConclusion [#conclusion]\n\nThis guide covered the most important changes that are required for the Cadence 1.0 upgrades to NFT contracts. Please ask any questions about the migrations in the #developer-questions channel in discord and good luck with your upgrades!\n\n{/* Relative links. Will not render on the page */}\n\n[`ExampleNFT` contract]: https://github.com/onflow/flow-nft/blob/master/contracts/ExampleNFT.cdc\n\n[`master` branch of the flow-nft repo]: https://github.com/onflow/flow-nft\n\n[PR that made the changes]: https://github.com/onflow/flow-nft/pull/126\n\n[TokenList]: https://token-list.fixes.world/?utm_source=Flowverse&utm_medium=Website&utm_campaign=Dapp\n\n[`master` branch in the NFT Storefront Repo]: https://github.com/onflow/nft-storefront/tree/master/contracts\n\n[repo]: https://github.com/onflow/bridged-usdc\n\n[`main` branch in the hybrid custody repo]: https://github.com/onflow/hybrid-custody\n\n[This Discord announcement]: https://discord.com/channels/613813861610684416/811693600403357706/1225909248429527140\n\n[Flow Contract Browser]: https://contractbrowser.com/\n\n[`BasicNFT` contract]: https://github.com/onflow/flow-nft/blob/universal-collection/contracts/BasicNFT.cdc\n\n[`UniversalCollection`]: https://github.com/onflow/flow-nft/blob/universal-collection/contracts/UniversalCollection.cdc\n\n[NFT-V2 FLIP]: https://github.com/onflow/flips/pull/56\n",s={title:"Non-Fungible Token Cadence 1.0 Migration Guide"},r={contents:[{heading:"non-fungible-tokens-in-cadence-10",content:`:::important
On September 4th, 2024, the Flow Mainnet upgraded to Cadence 1.0. In addition to many changes to the Cadence programming language, the Cadence token standards were also streamlined and improved. All applications' scripts and transactions need to be updated. If you do not update your code, your applications will not function properly.
:::
This document describes the changes to the Cadence Non-Fungible Token (NFT) standard and gives a step-by-step guide for how to upgrade your NFT contract from Cadence 0.42 to Cadence 1.0.`},{heading:"non-fungible-tokens-in-cadence-10",content:"We'll be using the [`ExampleNFT` contract] as an example. Many projects have used `ExampleNFT` as a starting point for their projects, so it is widely applicable to most NFT developers on Flow. The upgrades required for `ExampleNFT` will cover 90%+ of what you'll need to do to update your contract. Each project most likely has additional logic or features that aren't included in `ExampleNFT`, but hopefully, after reading this guide, you'll understand Cadence 1.0 well enough that you can easily make any other changes that are necessary."},{heading:"non-fungible-tokens-in-cadence-10",content:"Additionally, most of the changes described here also apply to anyone who is updating a Fungible Token contract or interacting with one, so keep that in mind while reading if that applies to you."},{heading:"non-fungible-tokens-in-cadence-10",content:"As always, there are plenty of people on the Flow team and in the community who are happy to help answer any questions you may have, so please reach out in Discord if you need any help."},{heading:"important-information",content:"Please read the [NFT-V2 FLIP] that describes the changes to the `NonFungibleToken` standard first."},{heading:"important-information",content:"The updated code for the V2 Non-Fungible Token standard is located in the [`master` branch of the flow-nft repo]. Please look at the [PR that made the changes] to understand how the standard and examples have changed. Note the changes to the `NonFungibleToken`, `MetadataViews`, `ViewResolver`, and `NFTForwarding` contracts."},{heading:"important-information",content:"Additionally, here are the import addresses for all of the important contracts related to non-fungible tokens. The second column is the import address if you are testing with a basic version of the emulator. The third column contains the import addresses if you are using the Cadence testing framework:"},{heading:"important-information",content:"Contract"},{heading:"important-information",content:"Emulator import address"},{heading:"important-information",content:"Testing framework"},{heading:"important-information",content:"`NonFungibleToken`"},{heading:"important-information",content:"`0xf8d6e0586b0a20c7`"},{heading:"important-information",content:"`0x0000000000000001`"},{heading:"important-information",content:"`FungibleToken`"},{heading:"important-information",content:"`0xee82856bf20e2aa6`"},{heading:"important-information",content:"`0x0000000000000002`"},{heading:"important-information",content:"`ViewResolver`"},{heading:"important-information",content:"`0xf8d6e0586b0a20c7`"},{heading:"important-information",content:"`0x0000000000000001`"},{heading:"important-information",content:"`Burner`"},{heading:"important-information",content:"`0xf8d6e0586b0a20c7`"},{heading:"important-information",content:"`0x0000000000000001`"},{heading:"important-information",content:"`MetadataViews`"},{heading:"important-information",content:"`0xf8d6e0586b0a20c7`"},{heading:"important-information",content:"`0x0000000000000001`"},{heading:"important-information",content:"See the other guides in this section of the docs for the import addresses of other important contracts in the emulator."},{heading:"important-information",content:"As for contracts that are important for NFT developers but aren't *core contracts*, here is information about where to find the Cadence 1.0 versions of each:"},{heading:"important-information",content:"**NFT Catalog** — The NFT Catalog has been deprecated for Cadence 1.0. Now that the token standards require implementing metadata views, NFT Catalog is not needed in its current form. The Flow team now maintains [TokenList], which is similar to NFT Catalog but is decentralized. Projects can register there without needing to be approved."},{heading:"important-information",content:"**NFT Storefront** — See the [`master` branch in the NFT Storefront Repo] for the updated versions of the `NFTStorefront` and `NFTStorefrontV2` contracts."},{heading:"important-information",content:"**USDC** — USDC was migrated to standard bridged USDC on Flow. See the [repo] for the latest version of the USDC contract."},{heading:"important-information",content:"**Account Linking and Hybrid Custody** — See the [`main` branch in the hybrid custody repo] for updated hybrid custody contracts."},{heading:"important-information",content:"[This Discord announcement] also contains versions of a lot of important contracts."},{heading:"important-information",content:"Use the [Flow Contract Browser] to find the 1.0 code of other contracts."},{heading:"a-note-for-newcomers",content:"This guide is primarily for developers who have existing contracts deployed to Flow mainnet that they need to update for Cadence 1.0. If you don't have any contracts deployed yet, it is recommended that you start an NFT contract from scratch by either copying the `ExampleNFT` contract from the `master` branch of the `flow-nft` repo."},{heading:"a-note-for-newcomers",content:"Additionally, the Flow community is working on  the [`BasicNFT` contract] in the `universal-collection` branch of the flow-nft GitHub repo. This is a simplified version of standard NFT contracts, but has not been completed yet."},{heading:"basicnft-and-universalcollection",content:"As part of the improvements to the NFT standard, there is now a new NFT contract example in the `flow-nft` GitHub repo:"},{heading:"basicnft-and-universalcollection",content:"[`BasicNFT` contract]."},{heading:"basicnft-and-universalcollection",content:"`BasicNFT` defines a Cadence NFT in as few lines of code as possible, 137 at the moment! This is possible because the contract basically only defines the NFT resource, the essential metadata views, and a minter resource. It doesn't have to define a collection! Most collection resources are 99% boilerplate code, so it really doesn't make sense for most projects to have to define their own collection."},{heading:"basicnft-and-universalcollection",content:"Instead, `BasicNFT` uses [`UniversalCollection`], a contract that defines a collection resource that has all of the standard functionality that a collection needs and nothing else. From now on, any project that doesn't want to do anything unique with their collection can just import `UniversalCollection` and call it from their `createEmptyCollection` function:"},{heading:"basicnft-and-universalcollection",content:"All they have to provide is a type and an identifier for the collection. `UniversalCollection.Collection` will enforce that only NFTs of the given type can be accepted by the collection:"},{heading:"basicnft-and-universalcollection",content:"It also constructs standard paths based on the identifier provided."},{heading:"basicnft-and-universalcollection",content:"`UniversalCollection` will be deployed to all of the networks soon after the Cadence 1.0 upgrade, so developers will be able to import from it after that point."},{heading:"basicnft-and-universalcollection",content:"We'll be putting out more information and guides for `BasicNFT` and `UniversalCollection` in the near future, but keep it in mind if you are thinking about deploying any new NFT contracts in the future!"},{heading:"migration-guide",content:"This guide will cover changes that are required because of upgrades to the Cadence programming language as well as the token standard. The improvements are described here as they apply to specific changes that projects need to make in order to be ready for the upgrade, but it is good to read all sources to fully understand the changes."},{heading:"migration-guide",content:"Please read the motivation section of the [NFT-V2 FLIP] to learn about why most of the changes to the standard were needed or desired."},{heading:"migration-guide",content:"First, we will cover the changes that come from the new token standards and then we will cover the changes that come from Cadence."},{heading:"token-standard-changes",content:"**`NonFungibleToken.NFT`**"},{heading:"token-standard-changes",content:"`NonFungibleToken.NFT` used to be a nested type specification, but now it is an interface!"},{heading:"token-standard-changes",content:"In your code, any instance that refers to `@NonFungibleToken.NFT` or `&NonFungibleToken.NFT` must be updated to `@{NonFungibleToken.NFT}` or `&{NonFungibleToken.NFT}` respectively."},{heading:"token-standard-changes",content:"**`NonFungibleToken.Collection`**"},{heading:"token-standard-changes",content:"Similar to `NFT`, `NonFungibleToken.Collection` is now an interface."},{heading:"token-standard-changes",content:"Since `Collection` is an interface, you will need to update every instance in your code that refers to `@NonFungibleToken.Collection` or `&NonFungibleToken.Collection` to `@{NonFungibleToken.Collection}` or `&{NonFungibleToken.Collection}` respectively to show that it is now an interface specification instead of a concrete type specification."},{heading:"conclusion",content:"This guide covered the most important changes that are required for the Cadence 1.0 upgrades to NFT contracts. Please ask any questions about the migrations in the #developer-questions channel in discord and good luck with your upgrades!"}],headings:[{id:"non-fungible-tokens-in-cadence-10",content:"Non-Fungible Tokens in Cadence 1.0"},{id:"important-information",content:"Important information"},{id:"a-note-for-newcomers",content:"A note for newcomers"},{id:"basicnft-and-universalcollection",content:"`BasicNFT` and `UniversalCollection`"},{id:"migration-guide",content:"Migration guide"},{id:"token-standard-changes",content:"Token Standard Changes"},{id:"conclusion",content:"Conclusion"}]};const c=[{depth:1,url:"#non-fungible-tokens-in-cadence-10",title:e.jsx(e.Fragment,{children:"Non-Fungible Tokens in Cadence 1.0"})},{depth:2,url:"#important-information",title:e.jsx(e.Fragment,{children:"Important information"})},{depth:2,url:"#a-note-for-newcomers",title:e.jsx(e.Fragment,{children:"A note for newcomers"})},{depth:2,url:"#basicnft-and-universalcollection",title:e.jsxs(e.Fragment,{children:[e.jsx("code",{children:"BasicNFT"})," and ",e.jsx("code",{children:"UniversalCollection"})]})},{depth:2,url:"#migration-guide",title:e.jsx(e.Fragment,{children:"Migration guide"})},{depth:3,url:"#token-standard-changes",title:e.jsx(e.Fragment,{children:"Token Standard Changes"})},{depth:2,url:"#conclusion",title:e.jsx(e.Fragment,{children:"Conclusion"})}];function o(t){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",span:"span",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...t.components};return e.jsxs(e.Fragment,{children:[e.jsx(n.h1,{id:"non-fungible-tokens-in-cadence-10",children:"Non-Fungible Tokens in Cadence 1.0"}),`
`,e.jsx(n.p,{children:`:::important
On September 4th, 2024, the Flow Mainnet upgraded to Cadence 1.0. In addition to many changes to the Cadence programming language, the Cadence token standards were also streamlined and improved. All applications' scripts and transactions need to be updated. If you do not update your code, your applications will not function properly.
:::
This document describes the changes to the Cadence Non-Fungible Token (NFT) standard and gives a step-by-step guide for how to upgrade your NFT contract from Cadence 0.42 to Cadence 1.0.`}),`
`,e.jsxs(n.p,{children:["We'll be using the ",e.jsxs(n.a,{href:"https://github.com/onflow/flow-nft/blob/master/contracts/ExampleNFT.cdc",children:[e.jsx(n.code,{children:"ExampleNFT"})," contract"]})," as an example. Many projects have used ",e.jsx(n.code,{children:"ExampleNFT"})," as a starting point for their projects, so it is widely applicable to most NFT developers on Flow. The upgrades required for ",e.jsx(n.code,{children:"ExampleNFT"})," will cover 90%+ of what you'll need to do to update your contract. Each project most likely has additional logic or features that aren't included in ",e.jsx(n.code,{children:"ExampleNFT"}),", but hopefully, after reading this guide, you'll understand Cadence 1.0 well enough that you can easily make any other changes that are necessary."]}),`
`,e.jsx(n.p,{children:"Additionally, most of the changes described here also apply to anyone who is updating a Fungible Token contract or interacting with one, so keep that in mind while reading if that applies to you."}),`
`,e.jsx(n.p,{children:"As always, there are plenty of people on the Flow team and in the community who are happy to help answer any questions you may have, so please reach out in Discord if you need any help."}),`
`,e.jsx(n.h2,{id:"important-information",children:"Important information"}),`
`,e.jsxs(n.p,{children:["Please read the ",e.jsx(n.a,{href:"https://github.com/onflow/flips/pull/56",children:"NFT-V2 FLIP"})," that describes the changes to the ",e.jsx(n.code,{children:"NonFungibleToken"})," standard first."]}),`
`,e.jsxs(n.p,{children:["The updated code for the V2 Non-Fungible Token standard is located in the ",e.jsxs(n.a,{href:"https://github.com/onflow/flow-nft",children:[e.jsx(n.code,{children:"master"})," branch of the flow-nft repo"]}),". Please look at the ",e.jsx(n.a,{href:"https://github.com/onflow/flow-nft/pull/126",children:"PR that made the changes"})," to understand how the standard and examples have changed. Note the changes to the ",e.jsx(n.code,{children:"NonFungibleToken"}),", ",e.jsx(n.code,{children:"MetadataViews"}),", ",e.jsx(n.code,{children:"ViewResolver"}),", and ",e.jsx(n.code,{children:"NFTForwarding"})," contracts."]}),`
`,e.jsx(n.p,{children:"Additionally, here are the import addresses for all of the important contracts related to non-fungible tokens. The second column is the import address if you are testing with a basic version of the emulator. The third column contains the import addresses if you are using the Cadence testing framework:"}),`
`,e.jsxs(n.table,{children:[e.jsx(n.thead,{children:e.jsxs(n.tr,{children:[e.jsx(n.th,{children:"Contract"}),e.jsx(n.th,{children:"Emulator import address"}),e.jsx(n.th,{children:"Testing framework"})]})}),e.jsxs(n.tbody,{children:[e.jsxs(n.tr,{children:[e.jsx(n.td,{children:e.jsx(n.code,{children:"NonFungibleToken"})}),e.jsx(n.td,{children:e.jsx(n.code,{children:"0xf8d6e0586b0a20c7"})}),e.jsx(n.td,{children:e.jsx(n.code,{children:"0x0000000000000001"})})]}),e.jsxs(n.tr,{children:[e.jsx(n.td,{children:e.jsx(n.code,{children:"FungibleToken"})}),e.jsx(n.td,{children:e.jsx(n.code,{children:"0xee82856bf20e2aa6"})}),e.jsx(n.td,{children:e.jsx(n.code,{children:"0x0000000000000002"})})]}),e.jsxs(n.tr,{children:[e.jsx(n.td,{children:e.jsx(n.code,{children:"ViewResolver"})}),e.jsx(n.td,{children:e.jsx(n.code,{children:"0xf8d6e0586b0a20c7"})}),e.jsx(n.td,{children:e.jsx(n.code,{children:"0x0000000000000001"})})]}),e.jsxs(n.tr,{children:[e.jsx(n.td,{children:e.jsx(n.code,{children:"Burner"})}),e.jsx(n.td,{children:e.jsx(n.code,{children:"0xf8d6e0586b0a20c7"})}),e.jsx(n.td,{children:e.jsx(n.code,{children:"0x0000000000000001"})})]}),e.jsxs(n.tr,{children:[e.jsx(n.td,{children:e.jsx(n.code,{children:"MetadataViews"})}),e.jsx(n.td,{children:e.jsx(n.code,{children:"0xf8d6e0586b0a20c7"})}),e.jsx(n.td,{children:e.jsx(n.code,{children:"0x0000000000000001"})})]})]})]}),`
`,e.jsx(n.p,{children:"See the other guides in this section of the docs for the import addresses of other important contracts in the emulator."}),`
`,e.jsxs(n.p,{children:["As for contracts that are important for NFT developers but aren't ",e.jsx(n.em,{children:"core contracts"}),", here is information about where to find the Cadence 1.0 versions of each:"]}),`
`,e.jsxs(n.ul,{children:[`
`,e.jsxs(n.li,{children:[e.jsx(n.strong,{children:"NFT Catalog"})," — The NFT Catalog has been deprecated for Cadence 1.0. Now that the token standards require implementing metadata views, NFT Catalog is not needed in its current form. The Flow team now maintains ",e.jsx(n.a,{href:"https://token-list.fixes.world/?utm_source=Flowverse&utm_medium=Website&utm_campaign=Dapp",children:"TokenList"}),", which is similar to NFT Catalog but is decentralized. Projects can register there without needing to be approved."]}),`
`,e.jsxs(n.li,{children:[e.jsx(n.strong,{children:"NFT Storefront"})," — See the ",e.jsxs(n.a,{href:"https://github.com/onflow/nft-storefront/tree/master/contracts",children:[e.jsx(n.code,{children:"master"})," branch in the NFT Storefront Repo"]})," for the updated versions of the ",e.jsx(n.code,{children:"NFTStorefront"})," and ",e.jsx(n.code,{children:"NFTStorefrontV2"})," contracts."]}),`
`,e.jsxs(n.li,{children:[e.jsx(n.strong,{children:"USDC"})," — USDC was migrated to standard bridged USDC on Flow. See the ",e.jsx(n.a,{href:"https://github.com/onflow/bridged-usdc",children:"repo"})," for the latest version of the USDC contract."]}),`
`,e.jsxs(n.li,{children:[e.jsx(n.strong,{children:"Account Linking and Hybrid Custody"})," — See the ",e.jsxs(n.a,{href:"https://github.com/onflow/hybrid-custody",children:[e.jsx(n.code,{children:"main"})," branch in the hybrid custody repo"]})," for updated hybrid custody contracts."]}),`
`]}),`
`,e.jsxs(n.p,{children:[e.jsx(n.a,{href:"https://discord.com/channels/613813861610684416/811693600403357706/1225909248429527140",children:"This Discord announcement"})," also contains versions of a lot of important contracts."]}),`
`,e.jsxs(n.p,{children:["Use the ",e.jsx(n.a,{href:"https://contractbrowser.com/",children:"Flow Contract Browser"})," to find the 1.0 code of other contracts."]}),`
`,e.jsx(n.h2,{id:"a-note-for-newcomers",children:"A note for newcomers"}),`
`,e.jsxs(n.p,{children:["This guide is primarily for developers who have existing contracts deployed to Flow mainnet that they need to update for Cadence 1.0. If you don't have any contracts deployed yet, it is recommended that you start an NFT contract from scratch by either copying the ",e.jsx(n.code,{children:"ExampleNFT"})," contract from the ",e.jsx(n.code,{children:"master"})," branch of the ",e.jsx(n.code,{children:"flow-nft"})," repo."]}),`
`,e.jsxs(n.p,{children:["Additionally, the Flow community is working on  the ",e.jsxs(n.a,{href:"https://github.com/onflow/flow-nft/blob/universal-collection/contracts/BasicNFT.cdc",children:[e.jsx(n.code,{children:"BasicNFT"})," contract"]})," in the ",e.jsx(n.code,{children:"universal-collection"})," branch of the flow-nft GitHub repo. This is a simplified version of standard NFT contracts, but has not been completed yet."]}),`
`,e.jsxs(n.h2,{id:"basicnft-and-universalcollection",children:[e.jsx(n.code,{children:"BasicNFT"})," and ",e.jsx(n.code,{children:"UniversalCollection"})]}),`
`,e.jsxs(n.p,{children:["As part of the improvements to the NFT standard, there is now a new NFT contract example in the ",e.jsx(n.code,{children:"flow-nft"})," GitHub repo:"]}),`
`,e.jsxs(n.ul,{children:[`
`,e.jsxs(n.li,{children:[e.jsxs(n.a,{href:"https://github.com/onflow/flow-nft/blob/universal-collection/contracts/BasicNFT.cdc",children:[e.jsx(n.code,{children:"BasicNFT"})," contract"]}),"."]}),`
`]}),`
`,e.jsxs(n.p,{children:[e.jsx(n.code,{children:"BasicNFT"})," defines a Cadence NFT in as few lines of code as possible, 137 at the moment! This is possible because the contract basically only defines the NFT resource, the essential metadata views, and a minter resource. It doesn't have to define a collection! Most collection resources are 99% boilerplate code, so it really doesn't make sense for most projects to have to define their own collection."]}),`
`,e.jsxs(n.p,{children:["Instead, ",e.jsx(n.code,{children:"BasicNFT"})," uses ",e.jsx(n.a,{href:"https://github.com/onflow/flow-nft/blob/universal-collection/contracts/UniversalCollection.cdc",children:e.jsx(n.code,{children:"UniversalCollection"})}),", a contract that defines a collection resource that has all of the standard functionality that a collection needs and nothing else. From now on, any project that doesn't want to do anything unique with their collection can just import ",e.jsx(n.code,{children:"UniversalCollection"})," and call it from their ",e.jsx(n.code,{children:"createEmptyCollection"})," function:"]}),`
`,e.jsx(e.Fragment,{children:e.jsx(n.pre,{className:"shiki shiki-themes github-light github-dark",style:{"--shiki-light":"#24292e","--shiki-dark":"#e1e4e8","--shiki-light-bg":"#fff","--shiki-dark-bg":"#24292e"},tabIndex:"0",icon:'<svg viewBox="0 0 24 24"><path d="M 6,1 C 4.354992,1 3,2.354992 3,4 v 16 c 0,1.645008 1.354992,3 3,3 h 12 c 1.645008,0 3,-1.354992 3,-3 V 8 7 A 1.0001,1.0001 0 0 0 20.707031,6.2929687 l -5,-5 A 1.0001,1.0001 0 0 0 15,1 h -1 z m 0,2 h 7 v 3 c 0,1.645008 1.354992,3 3,3 h 3 v 11 c 0,0.564129 -0.435871,1 -1,1 H 6 C 5.4358712,21 5,20.564129 5,20 V 4 C 5,3.4358712 5.4358712,3 6,3 Z M 15,3.4140625 18.585937,7 H 16 C 15.435871,7 15,6.5641288 15,6 Z" fill="currentColor" /></svg>',children:e.jsxs(n.code,{children:[e.jsxs(n.span,{className:"line",children:[e.jsx(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"access"}),e.jsx(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"("}),e.jsx(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"all"}),e.jsx(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:") "}),e.jsx(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"fun"}),e.jsx(n.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:" createEmptyCollection"}),e.jsx(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"(nftType: "}),e.jsx(n.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"Type"}),e.jsx(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"): "}),e.jsx(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"@"}),e.jsx(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"{"}),e.jsx(n.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:"NonFungibleToken"}),e.jsx(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"."}),e.jsx(n.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:"Collection"}),e.jsx(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"} {"})]}),`
`,e.jsxs(n.span,{className:"line",children:[e.jsx(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"    return"}),e.jsx(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:" <-"}),e.jsx(n.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:" UniversalCollection"}),e.jsx(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"."}),e.jsx(n.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:"createEmptyCollection"}),e.jsx(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"(identifier: "}),e.jsx(n.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:'"flowBasicNFTCollection"'}),e.jsx(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:", type: "}),e.jsx(n.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"Type"}),e.jsx(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"<@"}),e.jsx(n.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:"BasicNFT"}),e.jsx(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"."}),e.jsx(n.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:"NFT"}),e.jsx(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:">"}),e.jsx(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"())"})]}),`
`,e.jsx(n.span,{className:"line",children:e.jsx(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"}"})})]})})}),`
`,e.jsxs(n.p,{children:["All they have to provide is a type and an identifier for the collection. ",e.jsx(n.code,{children:"UniversalCollection.Collection"})," will enforce that only NFTs of the given type can be accepted by the collection:"]}),`
`,e.jsx(e.Fragment,{children:e.jsx(n.pre,{className:"shiki shiki-themes github-light github-dark",style:{"--shiki-light":"#24292e","--shiki-dark":"#e1e4e8","--shiki-light-bg":"#fff","--shiki-dark-bg":"#24292e"},tabIndex:"0",icon:'<svg viewBox="0 0 24 24"><path d="M 6,1 C 4.354992,1 3,2.354992 3,4 v 16 c 0,1.645008 1.354992,3 3,3 h 12 c 1.645008,0 3,-1.354992 3,-3 V 8 7 A 1.0001,1.0001 0 0 0 20.707031,6.2929687 l -5,-5 A 1.0001,1.0001 0 0 0 15,1 h -1 z m 0,2 h 7 v 3 c 0,1.645008 1.354992,3 3,3 h 3 v 11 c 0,0.564129 -0.435871,1 -1,1 H 6 C 5.4358712,21 5,20.564129 5,20 V 4 C 5,3.4358712 5.4358712,3 6,3 Z M 15,3.4140625 18.585937,7 H 16 C 15.435871,7 15,6.5641288 15,6 Z" fill="currentColor" /></svg>',children:e.jsxs(n.code,{children:[e.jsxs(n.span,{className:"line",children:[e.jsx(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"access"}),e.jsx(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"("}),e.jsx(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"all"}),e.jsx(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:") "}),e.jsx(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"fun"}),e.jsx(n.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:" deposit"}),e.jsx(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"(token: "}),e.jsx(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"@"}),e.jsx(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"{"}),e.jsx(n.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:"NonFungibleToken"}),e.jsx(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"."}),e.jsx(n.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:"NFT"}),e.jsx(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"}) {"})]}),`
`,e.jsxs(n.span,{className:"line",children:[e.jsx(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"    if"}),e.jsx(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:" self"}),e.jsx(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:".supportedType "}),e.jsx(n.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"!="}),e.jsx(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" token."}),e.jsx(n.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:"getType"}),e.jsx(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"() {"})]}),`
`,e.jsxs(n.span,{className:"line",children:[e.jsx(n.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:"        panic"}),e.jsx(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"("}),e.jsx(n.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:'"Cannot deposit an NFT of the given type"'}),e.jsx(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:")"})]}),`
`,e.jsx(n.span,{className:"line",children:e.jsx(n.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"    }"})})]})})}),`
`,e.jsx(n.p,{children:"It also constructs standard paths based on the identifier provided."}),`
`,e.jsxs(n.p,{children:[e.jsx(n.code,{children:"UniversalCollection"})," will be deployed to all of the networks soon after the Cadence 1.0 upgrade, so developers will be able to import from it after that point."]}),`
`,e.jsxs(n.p,{children:["We'll be putting out more information and guides for ",e.jsx(n.code,{children:"BasicNFT"})," and ",e.jsx(n.code,{children:"UniversalCollection"})," in the near future, but keep it in mind if you are thinking about deploying any new NFT contracts in the future!"]}),`
`,e.jsx(n.h2,{id:"migration-guide",children:"Migration guide"}),`
`,e.jsx(n.p,{children:"This guide will cover changes that are required because of upgrades to the Cadence programming language as well as the token standard. The improvements are described here as they apply to specific changes that projects need to make in order to be ready for the upgrade, but it is good to read all sources to fully understand the changes."}),`
`,e.jsxs(n.p,{children:["Please read the motivation section of the ",e.jsx(n.a,{href:"https://github.com/onflow/flips/pull/56",children:"NFT-V2 FLIP"})," to learn about why most of the changes to the standard were needed or desired."]}),`
`,e.jsx(n.p,{children:"First, we will cover the changes that come from the new token standards and then we will cover the changes that come from Cadence."}),`
`,e.jsx(n.h3,{id:"token-standard-changes",children:"Token Standard Changes"}),`
`,e.jsx(n.p,{children:e.jsx(n.strong,{children:e.jsx(n.code,{children:"NonFungibleToken.NFT"})})}),`
`,e.jsxs(n.p,{children:[e.jsx(n.code,{children:"NonFungibleToken.NFT"})," used to be a nested type specification, but now it is an interface!"]}),`
`,e.jsxs(n.p,{children:["In your code, any instance that refers to ",e.jsx(n.code,{children:"@NonFungibleToken.NFT"})," or ",e.jsx(n.code,{children:"&NonFungibleToken.NFT"})," must be updated to ",e.jsx(n.code,{children:"@{NonFungibleToken.NFT}"})," or ",e.jsx(n.code,{children:"&{NonFungibleToken.NFT}"})," respectively."]}),`
`,e.jsx(n.p,{children:e.jsx(n.strong,{children:e.jsx(n.code,{children:"NonFungibleToken.Collection"})})}),`
`,e.jsxs(n.p,{children:["Similar to ",e.jsx(n.code,{children:"NFT"}),", ",e.jsx(n.code,{children:"NonFungibleToken.Collection"})," is now an interface."]}),`
`,e.jsxs(n.p,{children:["Since ",e.jsx(n.code,{children:"Collection"})," is an interface, you will need to update every instance in your code that refers to ",e.jsx(n.code,{children:"@NonFungibleToken.Collection"})," or ",e.jsx(n.code,{children:"&NonFungibleToken.Collection"})," to ",e.jsx(n.code,{children:"@{NonFungibleToken.Collection}"})," or ",e.jsx(n.code,{children:"&{NonFungibleToken.Collection}"})," respectively to show that it is now an interface specification instead of a concrete type specification."]}),`
`,e.jsx(n.h2,{id:"conclusion",children:"Conclusion"}),`
`,e.jsx(n.p,{children:"This guide covered the most important changes that are required for the Cadence 1.0 upgrades to NFT contracts. Please ask any questions about the migrations in the #developer-questions channel in discord and good luck with your upgrades!"}),`
`]})}function l(t={}){const{wrapper:n}=t.components||{};return n?e.jsx(n,{...t,children:e.jsx(o,{...t})}):o(t)}export{a as _markdown,l as default,s as frontmatter,r as structuredData,c as toc};
