import{j as e}from"./main-BXy83AsK.js";let a="\n\nFungible Tokens in Cadence 1.0 [#fungible-tokens-in-cadence-10]\n\n:::important\nOn September 4th, 2024, the Flow Mainnet upgraded to Cadence 1.0. In addition to many changes to the Cadence programming language, the Cadence token standards also got streamlined and improved. All applications need to migrate their existing Cadence scripts and transactions for the update. If you do not update your code, your application will not function.\n:::\nThis document describes the changes to the Cadence Fungible Token (FT) standard. We'll be using the [`ExampleToken` contract] as an example. Many projects have used `ExampleToken` as a starting point for their projects, so it is widely applicable to most NFT developers on Flow. The upgrades required for `ExampleToken` will cover 90%+ of what you'll need to do to update your contract. Each project most likely has additional logic or features that aren't included in `ExampleToken`, but hopefully, after reading this guide, you'll understand Cadence 1.0 well enough that you can easily make any other changes that are necessary.\n\nAs always, there are plenty of people on the Flow team and in the community who are happy to help answer any questions you may have, so please reach out in Discord if you need any help.\n\nImportant info [#important-info]\n\nPlease read the [FLIP] that describes the changes to the `FungibleToken` standard first.\n\nThe updated code for the V2 Fungible Token standard is located in the [`master` branch of the flow-ft repo]. Please look at the [PR that made the changes] to understand how the standard and examples have changed. Note the changes to the `FungibleTokenMetadataViews`, `Burner`, `FungibleTokenSwitchboard`, and `TokenForwarding` contracts.\n\nAdditionally, here are the import addresses for all of the important contracts related to fungible tokens. The second column is the import address if you are testing with a basic version of the emulator. The third column contains the import addresses if you are using the Cadence testing framework:\n\n| Contract                     | Emulator import address | Testing framework    |\n| ---------------------------- | ----------------------- | -------------------- |\n| `FungibleToken`              | `0xee82856bf20e2aa6`    | `0x0000000000000002` |\n| `ViewResolver`               | `0xf8d6e0586b0a20c7`    | `0x0000000000000001` |\n| `Burner`                     | `0xf8d6e0586b0a20c7`    | `0x0000000000000001` |\n| `MetadataViews`              | `0xf8d6e0586b0a20c7`    | `0x0000000000000001` |\n| `FungibleTokenMetadataViews` | `0xee82856bf20e2aa6`    | `0x0000000000000002` |\n| `FungibleTokenSwitchboard`   | `0xee82856bf20e2aa6`    | `0x0000000000000002` |\n\nSee the other guides in this section of the docs for the import addresses of other important contracts in the emulator.\n\nAs for contracts that are important for NFT developers but aren't *core contracts*, here is information about where to find the Cadence 1.0 versions of each:\n\n* **USDC** — USDC was migrated to standard bridged USDC on Flow. See the [repo] for the latest version of the USDC contract.\n* **Account Linking and Hybrid Custody** — See [this PR in the hybrid custody repo] for updated hybrid custody contracts.\n\n[This Discord announcement] also contains versions of a lot of important contracts.\n\nUse the [Flow Contract Browser] to find the 1.0 code of other contracts.\n\nMigration guide [#migration-guide]\n\nPlease see the [NFT Cadence 1.0 migration guide]. While the contracts aren't exactly the same, they share a large amount of functionality, and the changes described in that guide will cover 90% of the changes that are needed for fungible tokens, so if you just follow those instructions for your fungible token contract, you'll be most of the way there.\n\nHere, we will only describe the changes that are specific to the fungible token standard.\n\nVault implements FungibleToken.Vault [#vault-implements-fungibletokenvault]\n\n`FungibleToken.Vault` is no longer a resource type specification. It is now an interface that inherits from `Provider`, `Receiver`, `Balance`, `ViewResolver.Resolver`, and `Burner Burnable`.\n\nSince `Vault` is an interface, you will need to update every instance in your code that refers to `@FungibleToken.Vault` or `&FungibleToken.Vault` to `@{FungibleToken.Vault}` or `&{FungibleToken.Vault}` respectively to show that it is now an interface specification instead of a concrete type specification.\n\nHere's an example in `deposit()`:\n\n```cadence\n/// deposit now accepts a resource that implements the `FungibleToken.Vault` interface type\naccess(all) fun deposit(from: @{FungibleToken.Vault})\n```\n\nIf you have any more questions, please ask in discord and the Flow team will be happy to assist!\n\n{/* Relative links. Will not render on the page */}\n\n[`ExampleToken` contract]: https://github.com/onflow/flow-ft/blob/master/contracts/ExampleToken.cdc\n\n[FLIP]: https://github.com/onflow/flips/pull/55\n\n[`master` branch of the flow-ft repo]: https://github.com/onflow/flow-ft\n\n[PR that made the changes]: https://github.com/onflow/flow-ft/pull/131\n\n[repo]: https://github.com/onflow/bridged-usdc\n\n[this PR in the hybrid custody repo]: https://github.com/onflow/hybrid-custody/pull/164\n\n[This Discord announcement]: https://discord.com/channels/613813861610684416/811693600403357706/1225909248429527140\n\n[Flow Contract Browser]: https://contractbrowser.com/\n\n[NFT Cadence 1.0 migration guide]: ./nft-guide\n",r={title:"Fungible Token Cadence 1.0 Migration Guide"},s={contents:[{heading:"fungible-tokens-in-cadence-10",content:":::important\nOn September 4th, 2024, the Flow Mainnet upgraded to Cadence 1.0. In addition to many changes to the Cadence programming language, the Cadence token standards also got streamlined and improved. All applications need to migrate their existing Cadence scripts and transactions for the update. If you do not update your code, your application will not function.\n:::\nThis document describes the changes to the Cadence Fungible Token (FT) standard. We'll be using the [`ExampleToken` contract] as an example. Many projects have used `ExampleToken` as a starting point for their projects, so it is widely applicable to most NFT developers on Flow. The upgrades required for `ExampleToken` will cover 90%+ of what you'll need to do to update your contract. Each project most likely has additional logic or features that aren't included in `ExampleToken`, but hopefully, after reading this guide, you'll understand Cadence 1.0 well enough that you can easily make any other changes that are necessary."},{heading:"fungible-tokens-in-cadence-10",content:"As always, there are plenty of people on the Flow team and in the community who are happy to help answer any questions you may have, so please reach out in Discord if you need any help."},{heading:"important-info",content:"Please read the [FLIP] that describes the changes to the `FungibleToken` standard first."},{heading:"important-info",content:"The updated code for the V2 Fungible Token standard is located in the [`master` branch of the flow-ft repo]. Please look at the [PR that made the changes] to understand how the standard and examples have changed. Note the changes to the `FungibleTokenMetadataViews`, `Burner`, `FungibleTokenSwitchboard`, and `TokenForwarding` contracts."},{heading:"important-info",content:"Additionally, here are the import addresses for all of the important contracts related to fungible tokens. The second column is the import address if you are testing with a basic version of the emulator. The third column contains the import addresses if you are using the Cadence testing framework:"},{heading:"important-info",content:"Contract"},{heading:"important-info",content:"Emulator import address"},{heading:"important-info",content:"Testing framework"},{heading:"important-info",content:"`FungibleToken`"},{heading:"important-info",content:"`0xee82856bf20e2aa6`"},{heading:"important-info",content:"`0x0000000000000002`"},{heading:"important-info",content:"`ViewResolver`"},{heading:"important-info",content:"`0xf8d6e0586b0a20c7`"},{heading:"important-info",content:"`0x0000000000000001`"},{heading:"important-info",content:"`Burner`"},{heading:"important-info",content:"`0xf8d6e0586b0a20c7`"},{heading:"important-info",content:"`0x0000000000000001`"},{heading:"important-info",content:"`MetadataViews`"},{heading:"important-info",content:"`0xf8d6e0586b0a20c7`"},{heading:"important-info",content:"`0x0000000000000001`"},{heading:"important-info",content:"`FungibleTokenMetadataViews`"},{heading:"important-info",content:"`0xee82856bf20e2aa6`"},{heading:"important-info",content:"`0x0000000000000002`"},{heading:"important-info",content:"`FungibleTokenSwitchboard`"},{heading:"important-info",content:"`0xee82856bf20e2aa6`"},{heading:"important-info",content:"`0x0000000000000002`"},{heading:"important-info",content:"See the other guides in this section of the docs for the import addresses of other important contracts in the emulator."},{heading:"important-info",content:"As for contracts that are important for NFT developers but aren't *core contracts*, here is information about where to find the Cadence 1.0 versions of each:"},{heading:"important-info",content:"**USDC** — USDC was migrated to standard bridged USDC on Flow. See the [repo] for the latest version of the USDC contract."},{heading:"important-info",content:"**Account Linking and Hybrid Custody** — See [this PR in the hybrid custody repo] for updated hybrid custody contracts."},{heading:"important-info",content:"[This Discord announcement] also contains versions of a lot of important contracts."},{heading:"important-info",content:"Use the [Flow Contract Browser] to find the 1.0 code of other contracts."},{heading:"migration-guide",content:"Please see the [NFT Cadence 1.0 migration guide]. While the contracts aren't exactly the same, they share a large amount of functionality, and the changes described in that guide will cover 90% of the changes that are needed for fungible tokens, so if you just follow those instructions for your fungible token contract, you'll be most of the way there."},{heading:"migration-guide",content:"Here, we will only describe the changes that are specific to the fungible token standard."},{heading:"vault-implements-fungibletokenvault",content:"`FungibleToken.Vault` is no longer a resource type specification. It is now an interface that inherits from `Provider`, `Receiver`, `Balance`, `ViewResolver.Resolver`, and `Burner Burnable`."},{heading:"vault-implements-fungibletokenvault",content:"Since `Vault` is an interface, you will need to update every instance in your code that refers to `@FungibleToken.Vault` or `&FungibleToken.Vault` to `@{FungibleToken.Vault}` or `&{FungibleToken.Vault}` respectively to show that it is now an interface specification instead of a concrete type specification."},{heading:"vault-implements-fungibletokenvault",content:"Here's an example in `deposit()`:"},{heading:"vault-implements-fungibletokenvault",content:"If you have any more questions, please ask in discord and the Flow team will be happy to assist!"}],headings:[{id:"fungible-tokens-in-cadence-10",content:"Fungible Tokens in Cadence 1.0"},{id:"important-info",content:"Important info"},{id:"migration-guide",content:"Migration guide"},{id:"vault-implements-fungibletokenvault",content:"`Vault` implements `FungibleToken.Vault`"}]};const d=[{depth:1,url:"#fungible-tokens-in-cadence-10",title:e.jsx(e.Fragment,{children:"Fungible Tokens in Cadence 1.0"})},{depth:2,url:"#important-info",title:e.jsx(e.Fragment,{children:"Important info"})},{depth:2,url:"#migration-guide",title:e.jsx(e.Fragment,{children:"Migration guide"})},{depth:3,url:"#vault-implements-fungibletokenvault",title:e.jsxs(e.Fragment,{children:[e.jsx("code",{children:"Vault"})," implements ",e.jsx("code",{children:"FungibleToken.Vault"})]})}];function o(n){const t={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",span:"span",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...n.components};return e.jsxs(e.Fragment,{children:[e.jsx(t.h1,{id:"fungible-tokens-in-cadence-10",children:"Fungible Tokens in Cadence 1.0"}),`
`,e.jsxs(t.p,{children:[`:::important
On September 4th, 2024, the Flow Mainnet upgraded to Cadence 1.0. In addition to many changes to the Cadence programming language, the Cadence token standards also got streamlined and improved. All applications need to migrate their existing Cadence scripts and transactions for the update. If you do not update your code, your application will not function.
:::
This document describes the changes to the Cadence Fungible Token (FT) standard. We'll be using the `,e.jsxs(t.a,{href:"https://github.com/onflow/flow-ft/blob/master/contracts/ExampleToken.cdc",children:[e.jsx(t.code,{children:"ExampleToken"})," contract"]})," as an example. Many projects have used ",e.jsx(t.code,{children:"ExampleToken"})," as a starting point for their projects, so it is widely applicable to most NFT developers on Flow. The upgrades required for ",e.jsx(t.code,{children:"ExampleToken"})," will cover 90%+ of what you'll need to do to update your contract. Each project most likely has additional logic or features that aren't included in ",e.jsx(t.code,{children:"ExampleToken"}),", but hopefully, after reading this guide, you'll understand Cadence 1.0 well enough that you can easily make any other changes that are necessary."]}),`
`,e.jsx(t.p,{children:"As always, there are plenty of people on the Flow team and in the community who are happy to help answer any questions you may have, so please reach out in Discord if you need any help."}),`
`,e.jsx(t.h2,{id:"important-info",children:"Important info"}),`
`,e.jsxs(t.p,{children:["Please read the ",e.jsx(t.a,{href:"https://github.com/onflow/flips/pull/55",children:"FLIP"})," that describes the changes to the ",e.jsx(t.code,{children:"FungibleToken"})," standard first."]}),`
`,e.jsxs(t.p,{children:["The updated code for the V2 Fungible Token standard is located in the ",e.jsxs(t.a,{href:"https://github.com/onflow/flow-ft",children:[e.jsx(t.code,{children:"master"})," branch of the flow-ft repo"]}),". Please look at the ",e.jsx(t.a,{href:"https://github.com/onflow/flow-ft/pull/131",children:"PR that made the changes"})," to understand how the standard and examples have changed. Note the changes to the ",e.jsx(t.code,{children:"FungibleTokenMetadataViews"}),", ",e.jsx(t.code,{children:"Burner"}),", ",e.jsx(t.code,{children:"FungibleTokenSwitchboard"}),", and ",e.jsx(t.code,{children:"TokenForwarding"})," contracts."]}),`
`,e.jsx(t.p,{children:"Additionally, here are the import addresses for all of the important contracts related to fungible tokens. The second column is the import address if you are testing with a basic version of the emulator. The third column contains the import addresses if you are using the Cadence testing framework:"}),`
`,e.jsxs(t.table,{children:[e.jsx(t.thead,{children:e.jsxs(t.tr,{children:[e.jsx(t.th,{children:"Contract"}),e.jsx(t.th,{children:"Emulator import address"}),e.jsx(t.th,{children:"Testing framework"})]})}),e.jsxs(t.tbody,{children:[e.jsxs(t.tr,{children:[e.jsx(t.td,{children:e.jsx(t.code,{children:"FungibleToken"})}),e.jsx(t.td,{children:e.jsx(t.code,{children:"0xee82856bf20e2aa6"})}),e.jsx(t.td,{children:e.jsx(t.code,{children:"0x0000000000000002"})})]}),e.jsxs(t.tr,{children:[e.jsx(t.td,{children:e.jsx(t.code,{children:"ViewResolver"})}),e.jsx(t.td,{children:e.jsx(t.code,{children:"0xf8d6e0586b0a20c7"})}),e.jsx(t.td,{children:e.jsx(t.code,{children:"0x0000000000000001"})})]}),e.jsxs(t.tr,{children:[e.jsx(t.td,{children:e.jsx(t.code,{children:"Burner"})}),e.jsx(t.td,{children:e.jsx(t.code,{children:"0xf8d6e0586b0a20c7"})}),e.jsx(t.td,{children:e.jsx(t.code,{children:"0x0000000000000001"})})]}),e.jsxs(t.tr,{children:[e.jsx(t.td,{children:e.jsx(t.code,{children:"MetadataViews"})}),e.jsx(t.td,{children:e.jsx(t.code,{children:"0xf8d6e0586b0a20c7"})}),e.jsx(t.td,{children:e.jsx(t.code,{children:"0x0000000000000001"})})]}),e.jsxs(t.tr,{children:[e.jsx(t.td,{children:e.jsx(t.code,{children:"FungibleTokenMetadataViews"})}),e.jsx(t.td,{children:e.jsx(t.code,{children:"0xee82856bf20e2aa6"})}),e.jsx(t.td,{children:e.jsx(t.code,{children:"0x0000000000000002"})})]}),e.jsxs(t.tr,{children:[e.jsx(t.td,{children:e.jsx(t.code,{children:"FungibleTokenSwitchboard"})}),e.jsx(t.td,{children:e.jsx(t.code,{children:"0xee82856bf20e2aa6"})}),e.jsx(t.td,{children:e.jsx(t.code,{children:"0x0000000000000002"})})]})]})]}),`
`,e.jsx(t.p,{children:"See the other guides in this section of the docs for the import addresses of other important contracts in the emulator."}),`
`,e.jsxs(t.p,{children:["As for contracts that are important for NFT developers but aren't ",e.jsx(t.em,{children:"core contracts"}),", here is information about where to find the Cadence 1.0 versions of each:"]}),`
`,e.jsxs(t.ul,{children:[`
`,e.jsxs(t.li,{children:[e.jsx(t.strong,{children:"USDC"})," — USDC was migrated to standard bridged USDC on Flow. See the ",e.jsx(t.a,{href:"https://github.com/onflow/bridged-usdc",children:"repo"})," for the latest version of the USDC contract."]}),`
`,e.jsxs(t.li,{children:[e.jsx(t.strong,{children:"Account Linking and Hybrid Custody"})," — See ",e.jsx(t.a,{href:"https://github.com/onflow/hybrid-custody/pull/164",children:"this PR in the hybrid custody repo"})," for updated hybrid custody contracts."]}),`
`]}),`
`,e.jsxs(t.p,{children:[e.jsx(t.a,{href:"https://discord.com/channels/613813861610684416/811693600403357706/1225909248429527140",children:"This Discord announcement"})," also contains versions of a lot of important contracts."]}),`
`,e.jsxs(t.p,{children:["Use the ",e.jsx(t.a,{href:"https://contractbrowser.com/",children:"Flow Contract Browser"})," to find the 1.0 code of other contracts."]}),`
`,e.jsx(t.h2,{id:"migration-guide",children:"Migration guide"}),`
`,e.jsxs(t.p,{children:["Please see the ",e.jsx(t.a,{href:"./nft-guide",children:"NFT Cadence 1.0 migration guide"}),". While the contracts aren't exactly the same, they share a large amount of functionality, and the changes described in that guide will cover 90% of the changes that are needed for fungible tokens, so if you just follow those instructions for your fungible token contract, you'll be most of the way there."]}),`
`,e.jsx(t.p,{children:"Here, we will only describe the changes that are specific to the fungible token standard."}),`
`,e.jsxs(t.h3,{id:"vault-implements-fungibletokenvault",children:[e.jsx(t.code,{children:"Vault"})," implements ",e.jsx(t.code,{children:"FungibleToken.Vault"})]}),`
`,e.jsxs(t.p,{children:[e.jsx(t.code,{children:"FungibleToken.Vault"})," is no longer a resource type specification. It is now an interface that inherits from ",e.jsx(t.code,{children:"Provider"}),", ",e.jsx(t.code,{children:"Receiver"}),", ",e.jsx(t.code,{children:"Balance"}),", ",e.jsx(t.code,{children:"ViewResolver.Resolver"}),", and ",e.jsx(t.code,{children:"Burner Burnable"}),"."]}),`
`,e.jsxs(t.p,{children:["Since ",e.jsx(t.code,{children:"Vault"})," is an interface, you will need to update every instance in your code that refers to ",e.jsx(t.code,{children:"@FungibleToken.Vault"})," or ",e.jsx(t.code,{children:"&FungibleToken.Vault"})," to ",e.jsx(t.code,{children:"@{FungibleToken.Vault}"})," or ",e.jsx(t.code,{children:"&{FungibleToken.Vault}"})," respectively to show that it is now an interface specification instead of a concrete type specification."]}),`
`,e.jsxs(t.p,{children:["Here's an example in ",e.jsx(t.code,{children:"deposit()"}),":"]}),`
`,e.jsx(e.Fragment,{children:e.jsx(t.pre,{className:"shiki shiki-themes github-light github-dark",style:{"--shiki-light":"#24292e","--shiki-dark":"#e1e4e8","--shiki-light-bg":"#fff","--shiki-dark-bg":"#24292e"},tabIndex:"0",icon:'<svg viewBox="0 0 24 24"><path d="M 6,1 C 4.354992,1 3,2.354992 3,4 v 16 c 0,1.645008 1.354992,3 3,3 h 12 c 1.645008,0 3,-1.354992 3,-3 V 8 7 A 1.0001,1.0001 0 0 0 20.707031,6.2929687 l -5,-5 A 1.0001,1.0001 0 0 0 15,1 h -1 z m 0,2 h 7 v 3 c 0,1.645008 1.354992,3 3,3 h 3 v 11 c 0,0.564129 -0.435871,1 -1,1 H 6 C 5.4358712,21 5,20.564129 5,20 V 4 C 5,3.4358712 5.4358712,3 6,3 Z M 15,3.4140625 18.585937,7 H 16 C 15.435871,7 15,6.5641288 15,6 Z" fill="currentColor" /></svg>',children:e.jsxs(t.code,{children:[e.jsx(t.span,{className:"line",children:e.jsx(t.span,{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"},children:"/// deposit now accepts a resource that implements the `FungibleToken.Vault` interface type"})}),`
`,e.jsxs(t.span,{className:"line",children:[e.jsx(t.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"access"}),e.jsx(t.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"("}),e.jsx(t.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"all"}),e.jsx(t.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:") "}),e.jsx(t.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"fun"}),e.jsx(t.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:" deposit"}),e.jsx(t.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"("}),e.jsx(t.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"from"}),e.jsx(t.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),e.jsx(t.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"@"}),e.jsx(t.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"{"}),e.jsx(t.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:"FungibleToken"}),e.jsx(t.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"."}),e.jsx(t.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:"Vault"}),e.jsx(t.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"})"})]})]})})}),`
`,e.jsx(t.p,{children:"If you have any more questions, please ask in discord and the Flow team will be happy to assist!"}),`
`]})}function c(n={}){const{wrapper:t}=n.components||{};return t?e.jsx(t,{...n,children:e.jsx(o,{...n})}):o(n)}export{a as _markdown,c as default,r as frontmatter,s as structuredData,d as toc};
